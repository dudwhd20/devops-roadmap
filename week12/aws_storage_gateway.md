# AWS Storage Gateway 정리

AWS Storage Gateway는 **온프레미스 환경과 AWS 클라우드 스토리지를 연결**해주는 하이브리드 클라우드 스토리지 서비스입니다. 로컬 애플리케이션은 로컬 스토리지처럼 접근하지만, 실제 데이터는 AWS에 저장되어 백업, 아카이브, 복구를 효율적으로 할 수 있게 도와줍니다.

---

## ✅ 주요 목적

* 기존 **온프레미스 환경을 클라우드로 확장**하고 싶을 때
* **백업/아카이브**를 클라우드로 전환하고자 할 때
* **로컬에서 자주 사용하는 데이터는 캐싱**하고, 나머지는 S3나 Glacier로 전송해 저장 비용 절감

---

## 🧱 Storage Gateway의 3가지 타입

| 유형                 | 설명                   | 사용 시나리오                  |
| ------------------ | -------------------- | ------------------------ |
| **File Gateway**   | NFS/SMB로 파일을 S3에 저장  | NAS 또는 파일 서버 백업, 문서 저장소  |
| **Volume Gateway** | 블록 스토리지처럼 작동 (iSCSI) | 기존 SAN/NAS 환경과 유사한 사용 방식 |
| **Tape Gateway**   | 가상 테이프 라이브러리(VTL) 구현 | 기존 테이프 백업 시스템을 클라우드로 대체  |

---

## 📁 1. File Gateway

* **NFS/SMB** 인터페이스로 제공
* 파일은 **Amazon S3 객체**로 저장됨
* 자주 사용하는 파일은 **로컬 캐시**에 저장
* ACL, 버전 관리, 이벤트 알림 등 S3 기능 연동 가능

### 예시

* 사내 공유 드라이브 → S3로 자동 동기화
* 스캔한 문서, 로그 파일, 이미지 파일 백업

---

## 💽 2. Volume Gateway

* iSCSI를 통해 블록 디바이스처럼 제공
* 2가지 운영 모드:

  * **Cached Volumes**: 자주 쓰는 데이터만 로컬에 캐싱, 나머지는 S3
  * **Stored Volumes**: 전체 데이터를 로컬에 저장, S3에 비동기 백업

### 예시

* VM이나 데이터베이스가 저장소로 사용
* 로컬 성능 유지 + 클라우드 백업

---

## 📼 3. Tape Gateway

* 기존 백업 소프트웨어에서 사용하는 \*\*테이프 백업 인터페이스(VTL)\*\*를 에뮬레이션
* 데이터를 Amazon S3와 Amazon Glacier(Deep Archive)로 저장
* **기존 백업/복구 워크플로우 그대로 사용 가능**

### 예시

* Veritas, Veeam, NetBackup 등의 테이프 백업을 S3/Glacier로 대체

---

## ⚙️ 구성 방법

1. **온프레미스에 VM 또는 EC2에 Storage Gateway 설치**
2. AWS Management Console에서 게이트웨이 등록
3. 캐시 디스크와 업로드 버퍼 설정
4. 연결할 S3 버킷, 볼륨, 가상 테이프 구성

---

## 🔐 보안 및 모니터링

* S3에 저장되는 데이터는 **암호화(SSE)** 적용 가능
* **CloudWatch**로 성능/용량/에러 모니터링
* IAM 정책으로 접근 제어

---

## 💡 요약

| 기능                | 설명                                  |
| ----------------- | ----------------------------------- |
| **하이브리드 스토리지**    | 온프레미스와 클라우드 스토리지를 통합                |
| **S3/Glacier 연동** | 백업, 아카이빙, DR(DRaaS)에 적합             |
| **로컬 캐시**         | 자주 접근하는 데이터는 빠르게 처리 가능              |
| **기존 시스템 호환**     | SMB/NFS/iSCSI/테이프 등 기존 방식 그대로 사용 가능 |

---


