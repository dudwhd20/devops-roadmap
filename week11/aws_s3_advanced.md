# AWS S3 고급 기능 실습 가이드

이 문서는 정적 웹 호스팅 이후에 적용할 수 있는 **S3의 고급 기능**들을 실습 순서대로 정리한 가이드입니다.

---

## 🧾 목차

1. [버전 관리 (Versioning)](#1-버전-관리-versioning)
2. [서버사이드 암호화 (SSE)](#2-서버사이드-암호화-sse)
3. [수명주기 정책 (Lifecycle)](#3-수명주기-정책-lifecycle)
4. [이벤트 알림 연동 (Event Notification)](#4-이벤트-알림-연동-event-notification)

---

## 1️⃣ 버전 관리 (Versioning)

### ✅ 기능 설명

- S3 객체 변경 시 이전 버전도 함께 저장
- 실수로 삭제하거나 덮어쓴 파일을 복구 가능

### 🛠️ 설정 방법 (콘솔)

1. S3 콘솔 → 버킷 선택 → [속성] 탭
2. [버전 관리] 항목 → **편집** 클릭
3. **버전 관리 사용** 선택 → 저장

### 💡 확인 방법

- 같은 이름의 파일을 여러 번 업로드 후 [객체] 탭에서 "모든 버전 보기" 활성화

---

## 2️⃣ 서버사이드 암호화 (SSE)

### ✅ 기능 설명

S3에 저장되는 데이터를 자동으로 암호화

| 암호화 방식 | 설명                           |
| ----------- | ------------------------------ |
| SSE-S3      | AWS에서 제공하는 기본 키       |
| SSE-KMS     | 고객 관리형 키 사용 (KMS 필요) |
| SSE-C       | 고객이 직접 제공한 키로 암호화 |

### 🛠️ SSE-S3 설정 방법 (콘솔)

1. 버킷 → [속성] → [기본 암호화] 항목
2. **SSE-S3 선택** → 저장

### 💡 업로드 시 암호화 확인

업로드된 객체 → [속성] → `SSE-S3` 표기 확인

---

## 3️⃣ 수명주기 정책 (Lifecycle)

### ✅ 기능 설명

오래된 객체를 자동으로 삭제하거나, 스토리지를 Glacier 등으로 전환 가능

### 🛠️ 설정 방법

1. 버킷 → [관리] 탭 → [수명 주기 규칙] 클릭
2. [규칙 만들기] 클릭
3. 규칙 이름 예: `auto-delete-old-logs`
4. 필터: 모든 객체 or 접두사 지정 (예: `logs/`)
5. 작업 설정:
   - 예: 30일 후 객체 삭제
   - 예: 60일 후 Glacier로 전환

---

## 4️⃣ 이벤트 알림 연동 (Event Notification)

### ✅ 기능 설명

S3에 객체가 업로드되거나 삭제될 때 다른 서비스와 연동 가능

| 연동 대상 | 설명                |
| --------- | ------------------- |
| Lambda    | 업로드 시 자동 처리 |
| SNS       | 메시지 발송         |
| SQS       | 큐에 메시지 전달    |

### 🛠️ Lambda 연동 실습 예 (콘솔 기준)

#### 사전 준비

- Lambda 함수 생성: `handleS3Upload`
- 권한: `AmazonS3FullAccess`, `AWSLambdaExecute`

#### 설정 방법

1. S3 → 버킷 선택 → [속성] 탭
2. [이벤트 알림] → [알림 구성 추가]
3. 이름: `on-upload`
4. 이벤트 유형: `PUT`
5. Lambda 함수 선택: `handleS3Upload`
6. 저장

---

## 📌 실습 요약

| 기능        | 실습 결과                       |
| ----------- | ------------------------------- |
| 버전 관리   | 파일의 모든 변경 이력 저장 가능 |
| SSE         | 객체 자동 암호화                |
| 수명 주기   | 자동 보관/삭제 가능             |
| 이벤트 알림 | Lambda 연동으로 자동처리        |

---

## 📎 CLI 예제 모음

```bash
# 버전 관리 활성화
aws s3api put-bucket-versioning --bucket my-s3-demo-bucket \
  --versioning-configuration Status=Enabled

# SSE-S3로 업로드
aws s3 cp file.txt s3://my-s3-demo-bucket/ --sse AES256
```
